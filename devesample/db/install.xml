<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="blocks/devesample/db" VERSION="20221110" COMMENT="XMLDB file for Moodle blocks/devesample"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="block_devesample_km" COMMENT="save course' knowledge map id">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="courseid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="link knowledge map to course"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="courseid" TYPE="foreign-unique" FIELDS="courseid" REFTABLE="course" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_nodes" COMMENT="Knowledge map's nodes here">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false" COMMENT="node's name"/>
        <FIELD NAME="field" TYPE="text" NOTNULL="true" SEQUENCE="false" COMMENT="node's senior field"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_links" COMMENT="Knowledge map's links here">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="fromnodeid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="tonodeid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="from" TYPE="foreign" FIELDS="fromnodeid" REFTABLE="block_devesample_nodes" REFFIELDS="id"/>
        <KEY NAME="to" TYPE="foreign" FIELDS="tonodeid" REFTABLE="block_devesample_nodes" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_nodes_slots" COMMENT="link knowledge map to its nodes">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="knowledgemap" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="node" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="node" TYPE="foreign" FIELDS="node" REFTABLE="block_devesample_nodes" REFFIELDS="id"/>
        <KEY NAME="knowledgemap" TYPE="foreign" FIELDS="knowledgemap" REFTABLE="block_devesample_km" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_links_slots" COMMENT="guide knowledge map to its links">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="knowledgemap" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="link" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="knowledgemap" TYPE="foreign" FIELDS="knowledgemap" REFTABLE="block_devesample_km" REFFIELDS="id"/>
        <KEY NAME="link" TYPE="foreign" FIELDS="link" REFTABLE="block_devesample_links" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_prt_map" COMMENT="prt map for questions">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="questionid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="prtname" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="questionid" TYPE="foreign" FIELDS="questionid" REFTABLE="question" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="block_devesample_prt_mapslot" COMMENT="map slot to nodes">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="prtmap" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="node" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="status" TYPE="binary" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="prtmap" TYPE="foreign" FIELDS="prtmap" REFTABLE="block_devesample_prt_map" REFFIELDS="id"/>
        <KEY NAME="node" TYPE="foreign" FIELDS="node" REFTABLE="block_devesample_nodes" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>
